:root {
      --matrix-green: #3bff65;
      --matrix-green-soft: rgba(59, 255, 101, 0.5);
      --matrix-green-dim: rgba(59, 255, 101, 0.25);
      --matrix-red: #ff5d73;
      --black-900: #040404;
      --black-800: #0a0a0a;
      --black-700: #111;
      --panel-line: rgba(59, 255, 101, 0.35);
      --panel-line-strong: rgba(59, 255, 101, 0.65);
      --text-muted: rgba(59, 255, 101, 0.7);
      --matrix-blue-soft: rgba(59, 198, 255, 0.85);
      --text-soft: rgba(59, 255, 101, 0.5);
      --nav-bg: #060606;
      --shadow-outer: 0 20px 60px rgba(0, 0, 0, 0.75);
      --shadow-inner: inset 0 0 40px rgba(0, 0, 0, 0.5);
      --bottom-nav-height: 70px;
      --font-terminal: "Cascadia Code", "Fira Code", "IBM Plex Mono", "Courier New", monospace;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: var(--font-terminal);
      background: radial-gradient(circle at top, #101010 0%, #040404 55%, #000 100%);
      color: var(--matrix-green);
      letter-spacing: 0.01em;
    }

    .app-shell {
      width: 360px;
      height: 720px;
      background: var(--black-900);
      border: 2px solid var(--panel-line);
      border-radius: 24px;
      box-shadow: var(--shadow-outer);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      position: relative;
    }

    .top-banner {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0.25rem 0.75rem 0.35rem;
      min-height: 72px;
      background: linear-gradient(180deg, rgba(59, 255, 101, 0.22) 0%, rgba(59, 255, 101, 0.06) 100%);
    }

    .top-banner__logo {
      display: block;
      width: 100%;
      max-width: 94%;
      max-height: 64px;
      object-fit: contain;
    }


    .screen {
      flex: 1;
      min-height: 0;
      display: flex;
      flex-direction: column;
      gap: 0.6rem;
      padding: 0.4rem 0.6rem calc(1rem + var(--bottom-nav-height, 70px));
      background: var(--black-800);
      box-shadow: var(--shadow-inner);
      position: relative;
    }


    .transcription-panel {
      position: relative;
      min-height: 0;
      flex: 1;
      width: calc(100% - 0.6rem);
      margin: 0 auto;
      border: 2px solid var(--panel-line-strong);
      border-radius: 22px;
      background: linear-gradient(180deg, rgba(10, 10, 10, 0.95) 0%, rgba(5, 5, 5, 0.9) 100%);
      padding: 0.75rem 1rem calc(1.1rem + var(--mic-button-size, 68px) + var(--bottom-nav-height, 70px));
      display: flex;
      flex-direction: column;
      gap: 0.9rem;
      overflow: hidden;
    }
    .transcription-panel::before {
      content: "";
      position: absolute;
      inset: 12px;
      border: 1px solid rgba(59, 255, 101, 0.2);
      border-radius: 18px;
      pointer-events: none;
    }


    .status-bar {
      position: sticky;
      top: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      padding-bottom: 0.6rem;
      background: linear-gradient(180deg, rgba(4, 4, 4, 0.95) 0%, rgba(4, 4, 4, 0.75) 85%, rgba(4,4,4,0) 100%);
      z-index: 2;
    }

    .timer {
      font-size: 0.8rem;
      letter-spacing: 0.08em;
      color: var(--matrix-blue-soft);
      text-shadow: 0 0 12px rgba(59, 198, 255, 0.6);
      min-width: 74px;
      text-align: center;
    }

    .status-bar__timer {
      margin: 0 auto;
    }

    .transcription-log {
      flex: 1;
      min-height: 0;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      gap: 0.6rem;
      padding: 0.5rem 0 1rem;
    }

    .transcription-placeholder {
      margin: auto;
      text-align: center;
      color: var(--matrix-green-dim);
      font-size: 0.95rem;
      letter-spacing: 0.12em;
    }

    .transcription-entry {
      position: relative;
      flex: 0 0 auto;
      padding: 0;
      color: var(--matrix-green);
      line-height: 1.5;
      letter-spacing: 0.05em;
      transform-origin: top;
    }

    .transcription-entry--live p {
      color: var(--text-soft);
      font-style: italic;
    }

    .transcription-entry--new {
      /* <span style="color: red;">
      animation: slideUp 200ms ease-out;
      </span> */
      /* <span style="color: blue;">
      CHANGED: Magic number 200ms replaced with CSS variable for consistent timing
      across all animations. If we want to speed up or slow down UI feedback globally,
      we can adjust one variable instead of hunting through the stylesheet.
      </span> */
      animation: slideUp var(--animation-duration-short, 200ms) ease-out;
    }

    @keyframes slideUp {
      from {
        /* <span style="color: red;">
        transform: translateY(24px);
        </span> */
        /* <span style="color: blue;">
        CHANGED: Magic number 24px replaced with CSS variable. This controls how far
        new entries "slide up" when appearing. The value should relate to entry padding.
        </span> */
        transform: translateY(var(--slide-distance, 24px));
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .transcription-entry p {
      margin: 0;
      color: var(--matrix-green);
      font-size: 0.75rem;
      white-space: pre-wrap;
    }

    .status-text {
      font-size: 0.8rem;
      color: var(--text-soft);
      text-align: center;
      letter-spacing: 0.08em;
    }

    .status-text.success {
      color: rgba(59, 255, 101, 0.85);
    }

    .status-text.error {
      color: var(--matrix-red);
    }

    .recording-controls {
      display: flex;
      align-items: center;
      justify-content: center;
      column-gap: clamp(2rem, 12vw, 4rem);
      position: absolute;
      left: 50%;
      bottom: calc(var(--bottom-nav-height, 70px) + 0.6rem);
      transform: translateX(-50%);
    }

    .mic-button,
    .control-button {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      width: var(--control-button-size, 74px);
      height: var(--control-button-size, 74px);
      margin: 0;
      border-radius: 50%;
      border: 2px solid var(--matrix-green);
      background: var(--black-900);
      color: var(--matrix-green);
      font-size: 1.9rem;
      cursor: pointer;
      transition:
        transform var(--animation-duration-short, 120ms) ease,
        box-shadow var(--animation-duration-medium, 160ms) ease,
        border-color var(--animation-duration-medium, 160ms) ease,
        color var(--animation-duration-medium, 160ms) ease;
      box-shadow: 0 0 10px rgba(59, 255, 101, 0.3);
      z-index: 1;
    }

    .mic-button {
      --control-button-size: 84px;
    }

    .control-button__icon {
      width: 42px;
      height: 42px;
      filter: drop-shadow(0 0 10px rgba(59, 255, 101, 0.45));
      pointer-events: none;
    }
    .control-button__icon--mic {
      width: 44px;
      height: 44px;
    }

    .control-button:hover,
    .control-button:focus-visible {
      border-color: var(--matrix-green);
      box-shadow: 0 0 12px rgba(59, 255, 101, 0.45);
      outline: none;
    } 

    .control-button:disabled {
      opacity: 0.45;
      cursor: not-allowed;
      box-shadow: none;
    }

    .mic-button {
      width: var(--mic-button-size, 68px);
      height: var(--mic-button-size, 68px);
    }

    .mic-button::before {
      content: "";
      position: absolute;
      inset: -4px;
      border-radius: 50%;
      background: conic-gradient(var(--matrix-green) 0deg, rgba(59,255,101,0) 120deg, rgba(59,255,101,0) 360deg);
      opacity: 0;
      /* <span style="color: red;">
      transition: opacity 200ms ease;
      animation: orbit 2.6s linear infinite;
      </span> */
      /* <span style="color: blue;">
      CHANGED: Magic numbers replaced with CSS variables for consistency
      </span> */
      transition: opacity var(--animation-duration-short, 200ms) ease;
      animation: orbit var(--orbit-duration, 2.6s) linear infinite;
    }

    @keyframes orbit {
      to { transform: rotate(360deg); }
    }

    .mic-button--armed::before {
      opacity: 0.35;
    }

    .mic-button--recording {
      border-color: var(--matrix-red);
      color: var(--matrix-red);
      box-shadow: 0 0 16px rgba(255, 93, 115, 0.45);
    }

    .mic-button--recording::before {
      background: conic-gradient(var(--matrix-red) 0deg, rgba(255,93,115,0.05) 140deg, rgba(255,93,115,0.05) 360deg);
      opacity: 0.6;
      /* <span style="color: red;">
      animation-duration: 1.5s;
      </span> */
      /* <span style="color: blue;">
      CHANGED: Magic number replaced with calculated value based on orbit duration.
      Recording state should spin faster (1.5s vs 2.6s) to convey urgency.
      </span> */
      animation-duration: calc(var(--orbit-duration, 2.6s) * 0.58);
    }

    

    .mic-button:focus-visible {
      outline: 3px solid rgba(59, 255, 101, 0.4);
      outline-offset: 3px;
    }

    ::-webkit-scrollbar {
      width: 6px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(255, 255, 255, 0.05);
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(59, 255, 101, 0.4);
      border-radius: 999px;
    }

    /* <span style="color: blue;">
    ADDED: CSS variables section for easier theming and maintenance.
    These should be moved to :root for global access and to support
    future dark/light mode toggles or user customization.
    </span> */
    :root {
      --animation-duration-short: 120ms;
      --animation-duration-medium: 160ms;
      --animation-duration-long: 200ms;
      --spinner-duration: 1.15s;
      --orbit-duration: 2.6s;
      --mic-button-size: 68px;
      --controls-clearance: 140px;
      --slide-distance: 24px;
    }
      

    .nav-item--agents .nav-icon {
      width: 26px;
      height: 26px;
      filter: drop-shadow(0 0 6px rgba(59, 255, 101, 0.35));
    }






    .bottom-nav {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: var(--bottom-nav-height, 70px);
      display: flex;
      justify-content: space-around;
      align-items: center;
      background: linear-gradient(180deg, rgba(59, 255, 101, 0.22) 0%, rgba(59, 255, 101, 0.06) 100%);
      border-top: 1px solid rgba(59, 255, 101, 0.25);
      box-shadow: 0 -12px 24px rgba(0, 0, 0, 0.6);
      z-index: 5;
    }

    .bottom-nav__item {
      background: none;
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      cursor: pointer;
      transition: transform 120ms ease, box-shadow 160ms ease;
    }

    .bottom-nav__item:hover,
    .bottom-nav__item:focus-visible,
    .bottom-nav__item--active {
      box-shadow: 0 0 14px rgba(59, 255, 101, 0.45);
      outline: none;
      transform: translateY(-2px);
    }

    .bottom-nav__icon {
      width: 28px;
      height: 28px;
      filter: drop-shadow(0 0 6px rgba(59, 255, 101, 0.45));
      pointer-events: none;
    }


    .app-shell--recorder .recording-controls {
      flex-direction: row;
      column-gap: clamp(2rem, 12vw, 4rem);
      row-gap: 0;
    }

    .app-shell--recorder .status-text {
      position: static;
      display: block;
      font-size: 0.72rem;
      letter-spacing: 0.12em;
      margin-top: 0.15rem;
      color: rgba(59, 255, 101, 0.8);
      text-transform: uppercase;
    }

    .app-shell--recorder .screen,
    .app-shell--editor .screen {
      padding-bottom: calc(0.6rem + var(--bottom-nav-height, 70px));
    }

    .app-shell--recorder .transcription-panel,
    .app-shell--editor .transcription-panel {
      padding: 0.75rem 1rem 1.2rem;
    }
    .coming-soon-log {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 0 1.2rem 1.2rem;
    }

    .coming-soon-message {
      font-size: 0.85rem;
    .agent-panel {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      padding: 1.2rem 1.4rem;
      background: rgba(0, 0, 0, 0.4);
      border: 1px solid rgba(59, 255, 101, 0.25);
      border-radius: 16px;
      box-shadow: inset 0 0 18px rgba(59, 255, 101, 0.08);
      min-height: 0;
    }

    .agent-panel__blurb {
      margin: 0;
      font-size: 0.8rem;
      line-height: 1.6;
      color: var(--text-soft);
      letter-spacing: 0.06em;
    }

    .agent-panel__label {
      font-size: 0.7rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: rgba(59, 255, 101, 0.75);
    }

    .agent-textarea {
      width: 100%;
      min-height: 8rem;
      padding: 0.9rem 1rem;
      border-radius: 12px;
      border: 1px solid rgba(59, 255, 101, 0.4);
      background: rgba(8, 17, 8, 0.65);
      color: var(--matrix-green);
      font-family: var(--font-terminal);
      font-size: 0.9rem;
      line-height: 1.5;
      letter-spacing: 0.05em;
      resize: vertical;
      transition: border-color 160ms ease, box-shadow 160ms ease;
    }

    .agent-textarea:focus {
      outline: none;
      border-color: rgba(59, 255, 101, 0.7);
      box-shadow: 0 0 10px rgba(59, 255, 101, 0.25);
    }

    .agent-textarea--small {
      min-height: 6rem;
    }

    .agent-panel__actions {
      display: flex;
      gap: 0.8rem;
      flex-wrap: wrap;
    }

    .agent-button {
      padding: 0.65rem 1.4rem;
      border-radius: 999px;
      border: 1px solid rgba(59, 255, 101, 0.5);
      background: rgba(59, 255, 101, 0.15);
      color: var(--matrix-green);
      letter-spacing: 0.1em;
      text-transform: uppercase;
      font-size: 0.68rem;
      cursor: pointer;
      transition: background 160ms ease, border-color 160ms ease, box-shadow 160ms ease;
    }

    .agent-button:hover,
    .agent-button:focus-visible {
      outline: none;
      border-color: rgba(59, 255, 101, 0.9);
      background: rgba(59, 255, 101, 0.25);
      box-shadow: 0 0 12px rgba(59, 255, 101, 0.25);
    }

    .agent-button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      box-shadow: none;
    }

    .agent-button--ghost {
      background: transparent;
      border-color: rgba(59, 255, 101, 0.35);
    }

    .agent-status-text {
      min-height: 1.2rem;
      margin: 0;
      font-size: 0.72rem;
      letter-spacing: 0.08em;
      color: var(--text-soft);
    }

    .agent-status-text--info {
      color: rgba(59, 255, 101, 0.75);
    }

    .agent-status-text--success {
      color: rgba(59, 255, 101, 0.9);
    }

    .agent-status-text--warn {
      color: rgba(255, 221, 102, 0.9);
    }

    .agent-status-text--error {
      color: var(--matrix-red);
    }

    .agent-output {
      flex: 1;
      min-height: 12rem;
      padding: 1rem 1.2rem;
      border-radius: 12px;
      border: 1px solid rgba(59, 255, 101, 0.3);
      background: rgba(4, 10, 4, 0.7);
      overflow-y: auto;
      color: var(--matrix-green);
      letter-spacing: 0.05em;
    }

    .agent-output__placeholder {
      margin: 0;
      color: var(--text-soft);
      font-size: 0.78rem;
      letter-spacing: 0.06em;
    }

    .agent-output__body {
      margin: 0;
      white-space: pre-wrap;
      font-size: 0.88rem;
      line-height: 1.6;
    }
      line-height: 1.6;
      letter-spacing: 0.08em;
      color: rgba(59, 255, 101, 0.85);
    }


